document.addEventListener("DOMContentLoaded", () => {
  const container = document.getElementById('ball-container');
  const mainBall = document.getElementById('main-ball');
  const resultBox = document.getElementById('result');
  const drawBtn = document.getElementById('drawBtn');

  const challenges = [
    "주말 외식 대신 만든 식사 한 끼 먹기",
    "닭가슴살 또는 삶은 계란을 곁들인 식사 올리기",
    "채소 3가지 이상 포함된 식사 사진 올리기",
    "현미밥 또는 귀리밥으로 구성한 한 끼 올리기",
    "반찬을 단백질+채소 중심으로 구성해보기",
    "양념 없이 구운 단백질 반찬 인증하기",
    "샐러드 + 단백질을 곁들인 다이어트 플레이트 구성해보기",
    "하루 세 끼를 모두 사진으로 인증해보기",
    "고구마나 단호박을 활용한 다이어트 식단 구성해보기"
  ];

  drawBtn.addEventListener("click", () => {
    drawBtn.disabled = true;
    mainBall.classList.remove('show');
    resultBox.innerHTML = "";
    container.innerHTML = "";

    for (let i = 0; i < 20; i++) {
      const ball = document.createElement('div');
      ball.classList.add('ball');
      ball.textContent = '🍽';
      ball.style.left = Math.random() * 90 + 'vw';
      ball.style.top = '-60px';
      ball.style.animationDelay = (Math.random() * 2) + 's';
      container.appendChild(ball);
    }

    const selected = challenges[Math.floor(Math.random() * challenges.length)];

    setTimeout(() => {
      mainBall.textContent = selected;
      mainBall.classList.add('show');

      resultBox.innerHTML = `
        <strong>🌿 오늘의 챌린지:</strong><br>
        “${selected}”<br><br>
        📸 <strong>이 화면을 캡처해서 단톡방에 올려주세요!</strong>
      `;

      drawBtn.disabled = false;
    }, 3000);
  });
});
